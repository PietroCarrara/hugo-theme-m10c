<meta name="author" content="{{ .Site.Params.author }}" />
<meta property="article:author" content="{{ .Site.Params.author }}">

{{ $desc := "" }}
{{ with .Description }}
  {{ $desc = . }}
{{ else }}
  {{if .IsPage }}
    {{/* First sentence */}}
    {{ $desc = truncate 159 "â€¦" (index (findRE `^.*?\.` (delimit (apply .PlainWords "htmlUnescape" ".") " " "") 1) 0) }}
  {{ else }}
    {{ with .Site.Params.description }}
      {{ $desc = . }}
    {{ end }}
  {{ end }}
{{ end }}
{{ if gt (strings.RuneCount $desc) 160 }}
  {{ warnf "%s: page description is too big" .File.Path }}
{{ end }}
{{ if lt (strings.RuneCount $desc) 25 }}
  {{ warnf "%s: page description is too small" .File.Path }}
{{ end }}
<meta name="description" content="{{ $desc | safeHTMLAttr }}" />

<link rel="canonical" href="{{ .Permalink }}" />
{{ if .IsTranslated }}
  {{ range .AllTranslations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
  {{ end }}
{{ end }}

{{ template "_internal/twitter_cards.html" . }}

{{ template "_internal/opengraph.html" . }}
{{ with ((.Resources.ByType "image").GetMatch "*feature*") }}
  <meta property="og:image:width" content="{{ .Width }}">
  <meta property="og:image:height" content="{{ .Height }}">
{{ end}}

{{ range .Params.tags }}
    <meta property="article:tag" content="{{ partial "tag-display.html" . }}">
{{ end }}

{{ with .Site.Params.fb_app_id }}
  <meta property="fb:app_id" content="{{ . }}">
{{ end }}

<meta name="robots" content="max-image-preview:large">